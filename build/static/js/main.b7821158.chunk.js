(this.webpackJsonppart1=this.webpackJsonppart1||[]).push([[0],{42:function(e,t,n){},43:function(e,t,n){"use strict";n.r(t);var r=n(17),c=n.n(r),a=n(8),u=n(4),o=n(2),s=n(0),i=function(e){return Object(s.jsx)("div",{children:Object(s.jsx)("input",{className:"search",value:e.keyword,onChange:e.stateUpdater,placeholder:"Search..."})})},d=function(e){var t=e.message,n=e.type;return null===t?null:Object(s.jsx)("div",{className:"".concat(n),children:t})},l=function(e){var t=e.submitAction,n=e.name,r=e.nameUpdater,c=e.number,a=e.numberUpdater;return Object(s.jsxs)("form",{onSubmit:t,children:[Object(s.jsxs)("div",{children:[Object(s.jsx)("div",{className:"entry",children:"Name"}),Object(s.jsx)("input",{className:"value",value:n,onChange:r})]}),Object(s.jsxs)("div",{children:[Object(s.jsx)("div",{className:"entry",children:"Number"}),Object(s.jsx)("input",{className:"value",value:c,onChange:a})]}),Object(s.jsx)("div",{children:Object(s.jsx)("button",{type:"submit",children:"add"})})]})},b=n(3),f=n.n(b),j=n(5),p=n(6),m=n.n(p),h="/api/persons",v={getAll:function(){var e=Object(j.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.get(h);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),create:function(){var e=Object(j.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.post(h,t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),remove:function(){var e=Object(j.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.delete("".concat(h,"/").concat(t),{id:t});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update:function(){var e=Object(j.a)(f.a.mark((function e(t,n){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.put("".concat(h,"/").concat(t),n);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},O=function(e){var t=e.uniq,n=e.name,r=e.number,c=e.delFunc;return Object(s.jsxs)("li",{className:"person",children:[n," ",r,Object(s.jsx)("button",{onClick:c,children:"delete"})]},t)},x=function(e){var t=e.db,n=e.keyword,r=e.setDb,c=e.setError;return Object(s.jsx)("div",{children:Object(s.jsx)("ul",{children:t.filter((function(e){return""===n||e.name.toLowerCase().includes(n.toLowerCase())})).map((function(e){return Object(s.jsx)(O,{uniq:e.id,name:e.name,number:e.number,delFunc:(n=e.id,function(){var e=t.find((function(e){return e.id===n}));window.confirm("Delete ".concat(e.name))&&v.remove(e.id).then((function(){r(t.filter((function(t){return t.id!==e.id})))})).then((function(){setTimeout((function(){c({})}),5e3),c({text:"Deleted ".concat(e.name),type:"error"})})).catch((function(){setTimeout((function(){c({})}),5e3),c({text:"Information of ".concat(e.name," has already been removed from server"),type:"error"}),r(t.filter((function(e){return e.id!==n})))}))})},e.name);var n}))})})},w=function(){var e=Object(o.useState)([]),t=Object(u.a)(e,2),n=t[0],r=t[1],c=Object(o.useState)(""),b=Object(u.a)(c,2),f=b[0],j=b[1],p=Object(o.useState)(""),m=Object(u.a)(p,2),h=m[0],O=m[1],w=Object(o.useState)(""),y=Object(u.a)(w,2),g=y[0],k=y[1],N=Object(o.useState)({}),C=Object(u.a)(N,2),U=C[0],A=C[1];Object(o.useEffect)((function(){v.getAll().then((function(e){r(e)}))}),[]);var S=function(){j(""),O("")};return Object(s.jsxs)("div",{children:[Object(s.jsx)("h2",{className:"title",children:"Phonebook"}),Object(s.jsx)(d,{message:U.text,type:U.type}),Object(s.jsx)(i,{keyword:g,stateUpdater:function(e){return k(e.target.value)}}),Object(s.jsx)("h2",{class:"add",children:"Add new entry"}),Object(s.jsx)(l,{submitAction:function(e){e.preventDefault();var t=n.find((function(e){return e.name===f}));if(t){if(window.confirm("".concat(f," is already added to phonebook, replace old number with a new one?"))){var c=Object(a.a)(Object(a.a)({},t),{},{number:h});v.update(t.id,c).then((function(e){console.log(e),r(n.map((function(n){return n.id===t.id?e:n})))})).then((function(){setTimeout((function(){A({})}),5e3),A({text:"Updated ".concat(t.name),type:"success"})})).catch((function(e){return console.log(e.response.data)}))}S()}else{var u={name:f.split(" ").map((function(e){return"".concat(e.trim().charAt(0).toUpperCase()).concat(e.trim().substring(1).toLowerCase())})).join(" "),number:h};v.create(u).then((function(){return r(n.concat(u))})).then((function(){return S()})).then((function(){setTimeout((function(){A({})}),5e3),A({text:"Added ".concat(f),type:"success"})})).catch((function(e){return console.log(e.message)}))}},name:f,nameUpdater:function(e){return j(e.target.value)},number:h,numberUpdater:function(e){return O(e.target.value)}}),Object(s.jsx)("h2",{children:"Numbers"}),Object(s.jsx)(x,{db:n,keyword:g,setDb:r,setError:A})]})};n(42);c.a.render(Object(s.jsx)(w,{}),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.b7821158.chunk.js.map