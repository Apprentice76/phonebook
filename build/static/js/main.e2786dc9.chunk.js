(this.webpackJsonppart1=this.webpackJsonppart1||[]).push([[0],{42:function(e,t,n){},43:function(e,t,n){"use strict";n.r(t);var r=n(17),a=n.n(r),c=n(8),u=n(4),o=n(2),i=n(0),s=function(e){return Object(i.jsx)("div",{children:Object(i.jsx)("input",{className:"search",value:e.keyword,onChange:e.stateUpdater,placeholder:"Search..."})})},d=function(e){var t=e.message,n=e.type;return null===t?null:Object(i.jsx)("div",{className:"".concat(n),children:t})},l=function(e){var t=e.submitAction,n=e.name,r=e.nameUpdater,a=e.number,c=e.numberUpdater;return Object(i.jsxs)("form",{onSubmit:t,children:[Object(i.jsxs)("div",{children:[Object(i.jsx)("div",{className:"entry",children:"Name"}),Object(i.jsx)("input",{className:"value",value:n,onChange:r})]}),Object(i.jsxs)("div",{children:[Object(i.jsx)("div",{className:"entry",children:"Number"}),Object(i.jsx)("input",{className:"value",value:a,onChange:c})]}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{type:"submit",children:"add"})})]})},m=n(3),b=n.n(m),f=n(5),p=n(6),j=n.n(p),h=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).baseUrl||"/api/persons",v={getAll:function(){var e=Object(f.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.get(h);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),create:function(){var e=Object(f.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.post(h,t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),remove:function(){var e=Object(f.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.delete("".concat(h,"/").concat(t),{id:t});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update:function(){var e=Object(f.a)(b.a.mark((function e(t,n){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.put("".concat(h,"/").concat(t),n);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},O=function(e){var t=e.uniq,n=e.name,r=e.number,a=e.delFunc;return Object(i.jsxs)("li",{className:"person",children:[n," ",r,Object(i.jsx)("button",{onClick:a,children:"delete"})]},t)},x=function(e){var t=e.db,n=e.keyword,r=e.setDb,a=e.setError;return Object(i.jsx)("div",{children:Object(i.jsx)("ul",{children:t.filter((function(e){return""===n||e.name.toLowerCase().includes(n.toLowerCase())})).map((function(e){return Object(i.jsx)(O,{uniq:e.id,name:e.name,number:e.number,delFunc:(n=e.id,function(){var e=t.find((function(e){return e.id===n}));window.confirm("Delete ".concat(e.name))&&v.remove(e.id).then((function(){r(t.filter((function(t){return t.id!==e.id})))})).then((function(){setTimeout((function(){a({})}),5e3),a({text:"Deleted ".concat(e.name),type:"error"})})).catch((function(){setTimeout((function(){a({})}),5e3),a({text:"Information of ".concat(e.name," has already been removed from server"),type:"error"}),r(t.filter((function(e){return e.id!==n})))}))})},e.name);var n}))})})},w=function(){var e=Object(o.useState)([]),t=Object(u.a)(e,2),n=t[0],r=t[1],a=Object(o.useState)(""),m=Object(u.a)(a,2),b=m[0],f=m[1],p=Object(o.useState)(""),j=Object(u.a)(p,2),h=j[0],O=j[1],w=Object(o.useState)(""),y=Object(u.a)(w,2),g=y[0],k=y[1],S=Object(o.useState)({}),E=Object(u.a)(S,2),N=E[0],C=E[1];Object(o.useEffect)((function(){v.getAll().then((function(e){r(e)}))}),[]);var T=function(){f(""),O("")};return Object(i.jsxs)("div",{children:[Object(i.jsx)("h2",{className:"title",children:"Phonebook"}),Object(i.jsx)(d,{message:N.text,type:N.type}),Object(i.jsx)(s,{keyword:g,stateUpdater:function(e){return k(e.target.value)}}),Object(i.jsx)("h2",{className:"add",children:"Add new entry"}),Object(i.jsx)(l,{submitAction:function(e){e.preventDefault();var t=function(e){var t={ok:!0,error:""};return e&&e.name&&e.number?e.name.length<3?t={ok:!1,error:"Error: name '".concat(e.name,"' is shorter than the minimum allowed length: 3.")}:e.number.length<6&&(t={ok:!1,error:"Error: number '".concat(e.number,"' is shorter than the minimum allowed length: 6.")}):t={ok:!1,error:"Error: Required fields are empty"},t}({name:b,number:h});if(!t.ok)return setTimeout((function(){C({})}),5e3),C({text:t.error,type:"error"}),void T();var a=n.find((function(e){return e.name===b.split("")[0].toUpperCase()+b.slice(1)}));if(a){if(window.confirm("".concat(b," is already added to phonebook, replace old number with a new one?"))){var u=Object(c.a)(Object(c.a)({},a),{},{number:h});v.update(a.id,u).then((function(e){console.log(e),r(n.map((function(t){return t.id===a.id?e:t})))})).then((function(){setTimeout((function(){C({})}),5e3),C({text:"Updated ".concat(a.name),type:"success"})})).catch((function(e){return console.log(e.response.data)}))}T()}else{var o={name:b.split(" ").map((function(e){return"".concat(e.trim().charAt(0).toUpperCase()).concat(e.trim().substring(1).toLowerCase())})).join(" "),number:h};v.create(o).then((function(){return r(n.concat(o))})).then((function(){return T()})).then((function(){setTimeout((function(){C({})}),5e3),C({text:"Added ".concat(b),type:"success"})})).catch((function(e){C({text:e.message,type:"error"}),console.log(e.message)}))}},name:b,nameUpdater:function(e){return f(e.target.value)},number:h,numberUpdater:function(e){return O(e.target.value)}}),Object(i.jsx)("h2",{children:"Numbers"}),Object(i.jsx)(x,{db:n,keyword:g,setDb:r,setError:C})]})};n(42);a.a.render(Object(i.jsx)(w,{}),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.e2786dc9.chunk.js.map